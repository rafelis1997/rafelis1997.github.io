<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello, WebVR! - A-Frame</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css?family=Muli&display=swap" rel="stylesheet">
    <script>
    var y = 0
      function changeAnimat() {
      var win = document.getElementById("arPage");
        if(y==0){
          win.contentWindow.document.getElementByClassName("bee").animationMixer ="clip:_bee_idle; loop:infinite";
          y = 1;
        } else if (y==1){
          win.contentWindow.document.getElementByClassName("bee").animationMixer ="clip:_bee_take_off_and_land; loop:infinite";
          y=2;
        } else {
          win.contentWindow.document.getElementByClassName("bee").animationMixer ="clip:_bee_hover; loop:infinite";
          y=0;
        }
      }
    function addScene() {
      var scene = document.createElement("iframe")
      scene.setAttribute("id", "arPage")
      scene.setAttribute("src", "arPage.html")
      scene.setAttribute("width", "100%")
      scene.setAttribute("height", "100%")
      document.getElementById("arCamera").style.border = "3px solid #fed766";
      document.getElementById("arCamera").style.borderRadius = "5px";
      document.getElementById("arCamera").style.margin = "10px 0 0 0";
      document.getElementById("arCamera").style.left = "10%";
      document.getElementById("arCamera").style.width = "auto";
      document.getElementById("arCamera").style.height = "80vh";
      document.getElementById("arCamera").style.padding = "2px 5px 0px 2px";


      var x = document.getElementById("arCamera").childElementCount;
      if(x != 0) {
        var child = document.getElementById("arCamera").lastElementChild;
        document.getElementById("arCamera").removeChild(child);
        document.getElementById("arCamera").style.visibility = "hidden";
      }
      else {
        document.getElementById("arCamera").appendChild(scene)
        document.getElementById("arCamera").style.visibility = "visible";
      }
    }
    </script>
  </head>  
  <body>
    <header>
      <h2 class="titulo">Rafael Heros de Almeida</h2>
      <h3>An augmented reality experiment</h3>
    </header>
    <div class="resume" style=" margin-top: 85px;">
        <h2>Resume</h2>
        <p>This is a test development of WebAR Ar.js API, to acquire knowledge about it. In order to test it you need to authorize the camera feed <br> and download the image from the link above</p>
        <a href="https://jeromeetienne.github.io/AR.js/data/images/HIRO.jpg">Download Image!</a>
    </div>
    <button class="activateAr" onclick="addScene()">
      Click me
    </button>
    <button class="changeAnim" onclick="changeAnimat()">
        Next Animation
    </button>
    <div id="arCamera"></div>
  </body>
</html>

